<Window x:Class="GravityCapture.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Gravity Capture" Height="720" Width="1060"
        Background="{StaticResource BgBrush}"
        FontFamily="Segoe UI"
        Foreground="{StaticResource TextSecondaryBrush}"
        WindowStartupLocation="CenterScreen">

  <Grid Margin="12">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <!-- TOP -->
    <Border Grid.Row="0"
            Background="{StaticResource CardBrush}"
            BorderBrush="{StaticResource InputBorderBrush}"
            BorderThickness="1"
            CornerRadius="{StaticResource CardRadius}"
            Padding="10">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Column 1 -->
        <Grid Grid.Column="0">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>

          <StackPanel Orientation="Horizontal" Grid.Row="0">
            <TextBlock Text="Channel ID:" Margin="2,2,8,2"/>
            <TextBox x:Name="ChannelBox" Width="220"/>
          </StackPanel>

          <StackPanel Orientation="Horizontal" Grid.Row="1">
            <TextBlock Text="API URL:" Margin="2,2,8,2"/>
            <TextBox x:Name="ApiUrlBox" Width="360"/>
          </StackPanel>

          <StackPanel Orientation="Horizontal" Grid.Row="2">
            <TextBlock Text="API Key:" Margin="2,2,8,2"/>
            <TextBox x:Name="ApiKeyBox" Width="360"/>
          </StackPanel>

          <StackPanel Orientation="Horizontal" Grid.Row="3">
            <TextBlock Text="Interval (min):" Margin="2,2,8,2"/>
            <TextBox x:Name="IntervalBox" Width="60" TextAlignment="Center"/>
            <CheckBox x:Name="ActiveWindowCheck" Content="Capture active window only" Margin="16,0,0,0"/>
          </StackPanel>

          <StackPanel Orientation="Horizontal" Grid.Row="4" VerticalAlignment="Center">
            <TextBlock Text="JPEG Quality:" Margin="2,2,8,2"/>
            <Slider x:Name="QualitySlider" Minimum="50" Maximum="100" Width="180" Value="85"/>
            <TextBlock x:Name="QualityLabel" Text="85" Margin="8,0,0,0"/>
          </StackPanel>
        </Grid>

        <!-- Column 2 -->
        <Grid Grid.Column="1">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>

          <StackPanel Orientation="Horizontal" Grid.Row="0">
            <TextBlock Text="Server:" Margin="2,2,8,2"/>
            <TextBox x:Name="ServerBox" Width="260"/>
          </StackPanel>

          <StackPanel Orientation="Horizontal" Grid.Row="1">
            <TextBlock Text="Tribe:" Margin="2,2,8,2"/>
            <TextBox x:Name="TribeBox" Width="260"/>
          </StackPanel>

          <TextBox x:Name="TitleHintBox" Visibility="Collapsed" />

          <WrapPanel Grid.Row="2" Margin="0,8,0,0">
            <Button x:Name="SaveBtn" Click="SaveBtn_Click" Content="Save" Style="{StaticResource SecondaryButton}"/>
            <Button x:Name="StartBtn" Click="StartBtn_Click" Content="Start" Style="{StaticResource PrimaryButton}"/>
            <Button x:Name="StopBtn" Click="StopBtn_Click" Content="Stop" Style="{StaticResource SecondaryButton}"/>
            <Button x:Name="SelectAreaBtn" Click="SelectCropBtn_Click" Content="Select Log Area…" Style="{StaticResource SecondaryButton}"/>
          </WrapPanel>

          <WrapPanel Grid.Row="3" Margin="0,6,0,0" VerticalAlignment="Center">
            <Button x:Name="OcrCropBtn" Click="OcrCropBtn_Click" Content="OCR Crop → Paste" Style="{StaticResource SecondaryButton}"/>
            <Button x:Name="OcrAndPostNowBtn" Click="OcrAndPostNowBtn_Click" Content="OCR &amp; Post Visible Now" Style="{StaticResource SecondaryButton}"/>
            <Button x:Name="SendParsedBtn" Click="SendParsedBtn_Click" Content="Send Pasted Log Line" Style="{StaticResource SecondaryButton}"/>
          </WrapPanel>
        </Grid>
      </Grid>
    </Border>

    <!-- FILTERS -->
    <Border Grid.Row="1"
            Background="{StaticResource CardBrush}"
            BorderBrush="{StaticResource InputBorderBrush}"
            BorderThickness="1"
            CornerRadius="{StaticResource CardRadius}"
            Padding="10" Margin="0,10,0,0">
      <StackPanel Orientation="Horizontal">
        <CheckBox x:Name="AutoOcrCheck" Content="Auto OCR ingest"/>
        <CheckBox x:Name="RedOnlyCheck" Content="Post only red logs" Margin="24,2,0,2"/>
        <TextBlock Text="Filters:" Margin="24,2,8,2"/>
        <CheckBox x:Name="FilterTameCheck" Content="Tame deaths"/>
        <CheckBox x:Name="FilterStructCheck" Content="Structures destroyed"/>
        <CheckBox x:Name="FilterTribeCheck" Content="Tribemate deaths"/>
      </StackPanel>
    </Border>

    <!-- LIVE PREVIEW + PASTE BOX -->
    <Grid Grid.Row="2" Margin="0,10,0,0">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="2*"/>
        <ColumnDefinition Width="3*"/>
      </Grid.ColumnDefinitions>

      <Border Grid.Column="0"
              Background="{StaticResource CardBrush}"
              BorderBrush="{StaticResource InputBorderBrush}"
              BorderThickness="1"
              CornerRadius="{StaticResource CardRadius}"
              Padding="10" Margin="0,0,10,0">
        <DockPanel>
          <TextBlock Text="Live preview" DockPanel.Dock="Top" Margin="2,0,0,6"/>
          <Border Background="#121316" BorderBrush="{StaticResource InputBorderBrush}" BorderThickness="1" CornerRadius="6">
            <Image x:Name="LivePreview" Stretch="Uniform" />
          </Border>
        </DockPanel>
      </Border>

      <Border Grid.Column="1"
              Background="{StaticResource CardBrush}"
              BorderBrush="{StaticResource InputBorderBrush}"
              BorderThickness="1"
              CornerRadius="{StaticResource CardRadius}"
              Padding="10">
        <DockPanel>
          <TextBlock Text="Paste a tribe log line:" DockPanel.Dock="Top" Margin="2,0,0,6"/>
          <ScrollViewer VerticalScrollBarVisibility="Auto">
            <TextBox x:Name="LogLineBox" AcceptsReturn="True" FontFamily="Consolas"
                     Foreground="#EEEEEE" Background="#111214" BorderThickness="0"
                     HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" />
          </ScrollViewer>
        </DockPanel>
      </Border>
    </Grid>

    <!-- STATUS -->
    <DockPanel Grid.Row="3" Margin="0,10,0,0">
      <TextBlock x:Name="StatusText" Foreground="#9ECFFF" />
    </DockPanel>
  </Grid>
</Window>
